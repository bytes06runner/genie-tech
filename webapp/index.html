<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>X10V — Algorand Bridge</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      /* Inline critical styles so something ALWAYS renders even if CSS/JS fails */
      body { margin: 0; background: #0D1117; color: #E6EDF3; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
      #boot-screen { min-height: 100vh; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 12px; }
      #boot-screen .spinner { width: 32px; height: 32px; border: 3px solid #21262D; border-top-color: #238636; border-radius: 50%; animation: spin 0.8s linear infinite; }
      @keyframes spin { to { transform: rotate(360deg); } }
      #boot-screen p { font-size: 13px; color: #8B949E; }
      #boot-error { display: none; min-height: 100vh; align-items: center; justify-content: center; flex-direction: column; gap: 12px; padding: 24px; text-align: center; }
      #boot-error h2 { font-size: 18px; margin: 0; }
      #boot-error pre { font-size: 11px; color: #F85149; background: #161B22; padding: 12px; border-radius: 8px; max-width: 90vw; overflow-x: auto; text-align: left; white-space: pre-wrap; word-break: break-all; }
      #boot-error button { padding: 10px 24px; background: #238636; color: #fff; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; }
    </style>
    <script>
      // Global error catcher — if React/Vite JS fails to load, show error instead of blank screen
      window.__bootLogs = [];
      window.__log = function(msg) { window.__bootLogs.push('[' + new Date().toISOString().slice(11,19) + '] ' + msg); console.log('[X10V] ' + msg); };
      window.onerror = function(msg, src, line, col, err) {
        window.__log('GLOBAL ERROR: ' + msg + ' at ' + src + ':' + line);
        document.getElementById('boot-screen').style.display = 'none';
        var el = document.getElementById('boot-error');
        el.style.display = 'flex';
        el.querySelector('pre').textContent = msg + '\n\nSource: ' + src + ':' + line + ':' + col + '\n\nBoot log:\n' + window.__bootLogs.join('\n');
      };
      window.addEventListener('unhandledrejection', function(e) {
        window.__log('UNHANDLED PROMISE: ' + (e.reason?.message || e.reason || 'unknown'));
      });
      window.__log('HTML parsed, Telegram SDK: ' + (typeof window.Telegram !== 'undefined'));
    </script>
  </head>
  <body>
    <!-- Visible immediately, before any JS loads -->
    <div id="boot-screen">
      <div class="spinner"></div>
      <p>X10V is loading…</p>
    </div>
    <!-- Hidden error screen, shown by onerror handler -->
    <div id="boot-error">
      <p style="font-size:40px">⚠️</p>
      <h2>X10V Failed to Load</h2>
      <pre>Loading...</pre>
      <button onclick="location.reload()">Reload</button>
    </div>
    <!-- React mounts here and hides boot-screen -->
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
